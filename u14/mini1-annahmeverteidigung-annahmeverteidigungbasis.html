<!DOCTYPE html>
<html lang="de">
 <head>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
  <title>Annahme/Verteidigung/Basis</title>
  <link rel="shortcut icon" href="../favicon.ico">
  <link href='../styles.css' rel='stylesheet'></link>
  <link href='../styles-data.css' rel='stylesheet'></link>
 </head>
 <body>
  <a href="../overview.html#u14" class="h1" data-key="main">Nachwuchs</a>
  <h1>Annahme/Verteidigung/Basis</h1>
<h3>Annahme und Verteidigung zu dritt</h3><div class="image" title="Annahme und Verteidigung zu dritt"><?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:data="http://www.data.org/1/data" width="1000" height="1600" version="1.1" viewBox="0 0 1000 1600">
  <defs>
    <radialGradient id="courtFill" cx="800" cy="200" r="75%" spreadMethod="pad" gradientUnits="userSpaceOnUse">
      <stop offset="0%" stop-color="#ffe166"/>
      <stop offset="100%" stop-color="#d69e48"/>
    </radialGradient>
  </defs>
  <g>
    <rect x="0" y="0" width="1000" height="1600" style="stroke: none; fill: #8c001a0f;"/>
    <rect x="200" y="200" width="600" height="1200" style="fill: url('#courtFill'); stroke: #0000b2; stroke-width: 5;"/>
    <line x1="200" y1="800" x2="800" y2="800" style="fill: none; stroke: #0000b2; stroke-width: 5;"/>
    <line x1="200" y1="1100" x2="800" y2="1100" style="fill: none; stroke: #0000b2; stroke-width: 5;"/>
    <line x1="200" y1="500" x2="800" y2="500" style="fill: none; stroke: #0000b2; stroke-width: 5;"/>
    <line x1="185" y1="1100" x2="35" y2="1100" style="fill: none; stroke: #0000b2; stroke-width: 5; stroke-dasharray: 15 15;"/>
    <line x1="815" y1="1100" x2="965" y2="1100" style="fill: none; stroke: #0000b2; stroke-width: 5; stroke-dasharray: 15 15;"/>
    <line x1="185" y1="500" x2="35" y2="500" style="fill: none; stroke: #0000b2; stroke-width: 5; stroke-dasharray: 15 15;"/>
    <line x1="815" y1="500" x2="965" y2="500" style="fill: none; stroke: #0000b2; stroke-width: 5; stroke-dasharray: 15 15;"/>
  </g>
  <g class="actors">
    <path data-option="ID_window_editor_graphics_actor_ActorImpl_option_defense" d="M 50 340 A 300 135 0 0 0 550 340" transform="translate(200 800)" style="stroke: #808080c8; stroke-width: 20; stroke-linecap: round; stroke-linejoin: round; fill: none; display: none;"/>
    <g class="player" transform="translate(325 1170) rotate(15)">
      <ellipse cx="0" cy="0" rx="50" ry="25" style="stroke: none; fill: #b22222;"/>
      <g class="prepare-block">
        <line x1="-37.5" y1="-25" x2="-22.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="22.5" y1="-25" x2="37.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="block">
        <line x1="-41" y1="-25" x2="41" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="prepare-defense">
        <line x1="-37.5" y1="0" x2="-62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="-62.5" y1="-25" x2="-62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="62.5" y1="-25" x2="62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="defense">
        <line x1="-41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack">
        <line x1="37.5" y1="0" x2="37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack-left">
        <line x1="-37.5" y1="0" x2="-37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="set">
        <line x1="-37.5" y1="0" x2="-20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
    </g>
    <g class="player" transform="translate(500 1200)">
      <ellipse cx="0" cy="0" rx="50" ry="25" style="stroke: none; fill: #b22222;"/>
      <g class="prepare-block">
        <line x1="-37.5" y1="-25" x2="-22.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="22.5" y1="-25" x2="37.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="block">
        <line x1="-41" y1="-25" x2="41" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="prepare-defense">
        <line x1="-37.5" y1="0" x2="-62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="-62.5" y1="-25" x2="-62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="62.5" y1="-25" x2="62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="defense">
        <line x1="-41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack">
        <line x1="37.5" y1="0" x2="37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack-left">
        <line x1="-37.5" y1="0" x2="-37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="set">
        <line x1="-37.5" y1="0" x2="-20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
    </g>
    <g class="player" transform="translate(675 1170) rotate(-15)">
      <ellipse cx="0" cy="0" rx="50" ry="25" style="stroke: none; fill: #b22222;"/>
      <g class="prepare-block">
        <line x1="-37.5" y1="-25" x2="-22.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="22.5" y1="-25" x2="37.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 12.5; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="block">
        <line x1="-41" y1="-25" x2="41" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="prepare-defense">
        <line x1="-37.5" y1="0" x2="-62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="-62.5" y1="-25" x2="-62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="62.5" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="62.5" y1="-25" x2="62.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="defense">
        <line x1="-41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="41" y1="0" x2="0" y2="-75" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack">
        <line x1="37.5" y1="0" x2="37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="attack-left">
        <line x1="-37.5" y1="0" x2="-37.5" y2="-50" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
      <g class="set">
        <line x1="-37.5" y1="0" x2="-20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
        <line x1="37.5" y1="0" x2="20" y2="-25" style="fill: none; stroke: #b22222; stroke-width: 17; stroke-linecap: round; stroke-linejoin: round;"/>
      </g>
    </g>
  </g>
  <!-- context menu - - - - - - - - - - -->
  <rect id="contextmenu_bg" x="0" y="0" />
  <g id="contextmenu" class="contextmenu">
    <rect x="0" y="0" width="204" height="36" rx="5" ry="5" />
    <g class="menuitem" data-item="ID_window_editor_graphics_actor_ActorImpl_option_defense" transform="translate(0 0)">
     <rect x="2" y="2" width="200" height="32" />
     <rect x="7" y="10" width="15" height="15" rx="1" ry="1" class="cb" />
     <path d="M 8 17 l 5 7 l 13 -19" class="cb2" />
     <text x="30" y="25">Verteidigung</text>
    </g>
  </g>
  <style>
#contextmenu_bg {
  width: 100%;
  height: 100%;
  fill: #7777777f;
}
#contextmenu_bg, #contextmenu {
  display: none;
}

g.contextmenu > rect, g.submenu > rect {
  stroke: gray;
  stroke-width: 3px;
  fill: lightgray;
}
g.menuitem > rect, g.submenuitem > rect {
  stroke: none;
  fill: lightgray;
  cursor: pointer;
}
g.menuitem:hover > rect, g.submenuitem:hover > rect {
  fill: darkgray;
}
g.menuitem > text, g.submenuitem > text {
  stroke: none;
  fill: #111;
  font-family: Arial;
  font-size: 22px;
  cursor: pointer;
}
g.submenuitem > rect, g.submenuitem > text {
  cursor: default;
}
g.menuitem > rect.cb, g.menuitem > circle.rb {
  stroke: gray;
  stroke-width: 2px;
  fill: none;
}
g.menuitem > circle.rb2 {
  stroke: none;
  fill: #111;
}

g.menuitem > path.cb2, g.submenuitem > path.marker_submenu {
  stroke: #111;
  stroke-width: 2px;
  fill: none;
  display: block;
}
g.submenu {
  display: none;
}
g.submenuitem:hover > g.submenu {
  display: block;
}

g.menuitem > path.mi-play, g.menuitem > path.mi-stop {
  stroke: none;
  fill: #444;
}
g.menuitem > path.mi-pause {
  stroke: #444;
  stroke-width: 3px;
  fill: none;
}

#contextmenu > rect.separator {
  fill: #BBB;
  stroke: none;
}

g.actors.animation > g.move {
  display: none;
}
g.player > g {
  display: none;
}
g.player.attack > g.attack {
  display: block;
}
g.player.attack-left > g.attack-left {
  display: block;
}
g.player.prepare-block > g.prepare-block {
  display: block;
}
g.player.block > g.block {
  display: block;
}
g.player.prepare-defense > g.prepare-defense {
  display: block;
}
g.player.defense > g.defense {
  display: block;
}
g.player.set > g.set {
  display: block;
}

  </style>
<script>//<![CDATA[
/**
 * Selects the first matching dom element.
 * @param {string} selector The selector of the element.
 * @param {DOMElement} parent The optional root of the search (default: document).
 * @returns DOMElement The first matching DOM element.
 */
function $(selector, parent) {
  return (parent ? parent : document).querySelector(selector);
}

/**
 * Selects DOMElements.
 * @param {string} selector The selector of the DOMElements.
 * @param {DOMElement} parent The optional root of the search (default: document).
 * @returns {NodeList} The list of matching DOMElements.
 */
function $$(selector, parent) {
  return (parent ? parent : document).querySelectorAll(selector);
}

/**
 * Connects an event handler to a given DOMElement.
 * @param {DOMElement} elem The DOMElement to handle.
 * @param {string} event The name of the event to handle.
 * @param {Function} handler The ebvent handler.
 * @returns {void}
 */
function $event(elem, event, handler) {
  elem.addEventListener(event, handler);
}
//-- create menu script -----------------------------------------------
/* global $$ */
var cm, bg, 
    contextmenu = false;;

function init() {
  cm = $('#contextmenu');
  bg = $('#contextmenu_bg');

  $event(document, 'contextmenu', onContextMenu);
  $event(bg, 'click', onClick);
  $event(cm, 'click', onClick);

  option.init();
}

function onContextMenu(event) {
  event.preventDefault();

  // ignore clicks outside of svg area
  var svg = $('svg');
  if (!svg || !svg.contains(event.target)) {
    return;
  }

  // show context menu if not visible
  if (!contextmenu) {
    contextmenu = true;

    /**
     * Switch an option state.
     * @param {NodeList} elems A list of html elements.
     * @returns {void}
     */
    var setOpts = function(elems) {
      if (elems) {
        for (var i = 0, i2 = elems.length; i < i2; ++i) {
          var elem = elems[i],
              elemP = elem.parentNode;

          if (elemP.dataset && elemP.dataset.item) {
            var key = elemP.dataset.item;
            if (option.data[key] === true || option.data[key] === false) {
              elem.style.display = option.data[key] ? 'block' : 'none';
     	    }
          }
        }
      }
    };
    
    // handle all options: radios and checkboxes
    var rbs = document.getElementsByClassName('rb2'),
        cbs = document.getElementsByClassName('cb2');
    setOpts(rbs);
    setOpts(cbs);

    // show background + context menu
    cm.style.display = 'block';
    bg.style.display = 'block';
    //cm.style.transform = 'translate(' + event.pageX + 'px,' + event.pageY + 'px)';
    var svg = document.getElementsByTagName('svg')[0],
        pt = svg.createSVGPoint();
    
    // pass event coordinates
    pt.x = event.clientX;
    pt.y = event.clientY;    
    
    // transform to SVG coordinates
    var svgP = pt.matrixTransform(svg.getScreenCTM().inverse());

    cm.setAttribute('transform', 'translate(' + svgP.x + ' ' + svgP.y + ')');
  }
}


function onClick(event) {
  if (contextmenu) {
    contextmenu = false;
    cm.style.display = 'none';
    bg.style.display = 'none';

    var node = event.target;
    while (node) {
      if (node.dataset && node.dataset.item) {
        if (node.parentNode
            && node.parentNode.parentNode
            && node.parentNode.parentNode.dataset
            && node.parentNode.parentNode.dataset.group) {
          option.reset(node.parentNode.parentNode.dataset.group);
        }

        option.set(node.dataset.item);
        node = null;
      } else {
        node = node.parentNode;
      }
    }
  }
}

var option = {
  data: {
    'ID_window_editor_graphics_actor_ActorImpl_option_defense': false
  },

  reset: function(keys) {
    if (typeof keys === 'string') {
      var keys2 = keys.split(',');
      if (Array.isArray(keys2)) {
        for (var i = 0, i2 = keys2.length; i < i2; ++i) {
          this.data[keys2[i]] = false;
          this._updateElems(keys2[i], false);
        }
      }
    }
  },

  set: function(key) {
    this.data[key] = !this.data[key];
    this._updateElems(key);
  },
  
  init: function() {
    for (var key in this.data) {
      this._updateElems(key);
    }
  },
  
  _updateElems: function(key, state) {
    var st = state === undefined ? this.data[key] : state;

    // items that reflect the state
    var elems = $$('[data-option="' + key + '"]');
    if (elems) {
      for (var i = 0, i2 = elems.length; i < i2; ++i) {
        elems[i].style.display = st ? "block" : "none";
      }
    }
    
    // items that reflect the inverted state
    elems = $$('[data-option="' + key + '_not"]');
    if (elems) {
      for (var i = 0, i2 = elems.length; i < i2; ++i) {
        elems[i].style.display = st ? "none" : "block";
      }
    }
  }
};

init();

// init size of context submenu items (because of text size)
$$('g.submenuitem').forEach((sub) => {
  $event(sub, 'mouseenter', (event) => {
    var g = event.target;
    var txts = $$('g.submenu > g.menuitem > text');
    // 200 size of menu item + 2px width border, 30 is left of text field
    var len = 170;
    txts.forEach((txt) => len = Math.max(len, Math.ceil(txt.getBBox().width + 5)));
    if (len > 170) {
      var first = true;
      txts.forEach((txt) => {
        if (first) {
          var rc = $('rect', txt.parentNode.parentNode);
          rc.style.width = (len + 34) + 'px';
          first = false;
        }
        var rc = $('rect', txt.parentNode);
        rc.style.width = (len + 30) + 'px';
      });
    }
  });
});
//-- create menu script -----------------------------------------------
//]]></script>
</svg>
</div><div class="info with-image"><p>Alle 3 Spielerinnen nehmen an und verteidigen, eine äußere (wenn möglich die Rechte) soll aufspielen.</p>
</div>
<footer><div>Nachwuchskonzept</div><div>Nachwuchskonzept</div></footer>
 </body>
</html>
